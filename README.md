# AUV控制系统仿真平台

## 项目概述

本项目是一个基于Python的自主水下航行器（Autonomous Underwater Vehicle, AUV）控制系统仿真平台。该平台提供了一个完整的AUV物理模型、控制系统和可视化界面，用于模拟AUV在水下的运动状态和控制效果。

![AUV仿真系统示意图](https://placeholder-for-auv-simulation.png)  <!-- 可替换为实际截图 -->

## 系统架构

本仿真系统采用模块化设计，主要包含以下核心组件：

1. **物理模型模块** (`auv_model.py`) - 实现AUV的动力学模型，基于牛顿-欧拉方程
2. **控制模块** (`auv_controller.py`) - 实现PID控制器和键盘控制接口
3. **仿真引擎** (`auv_simulation.py`) - 协调各模块工作，管理仿真循环
4. **可视化界面** (`auv_visualizer.py`) - 基于PyQt5和OpenGL的3D可视化界面

系统架构图：
```
+------------------+      +------------------+      +------------------+
|                  |      |                  |      |                  |
|  可视化界面       +<-----+    仿真引擎      +<---->+     控制器       |
| (auv_visualizer) |      | (auv_simulation) |      | (auv_controller) |
|                  |      |                  |      |                  |
+------------------+      +------------------+      +--------+---------+
                                                         ^
                                                         |
                                                         v
                                               +------------------+
                                               |                  |
                                               |   物理模型       |
                                               |  (auv_model)     |
                                               |                  |
                                               +------------------+
```

## 功能特性

### 物理模型
- 基于牛顿-欧拉方程的AUV动力学仿真
- 单推进器四舵机配置的AUV模型
- 考虑流体动力学效应（线性阻力和角阻力）
- 完整的6自由度（位置和姿态）状态表示

### 控制系统
- 基于PID算法的深度、航向、俯仰和横滚控制
- 键盘交互式控制接口
- 独立舵板控制功能
- 可配置的PID参数

### 可视化界面
- 3D OpenGL渲染的AUV模型和环境
- 实时状态监测面板（位置、姿态、控制量等）
- 交互式视角控制（旋转、平移、缩放）
- 水表面和网格辅助显示
- 推力矢量可视化

### 仿真功能
- 可调节的仿真时间步长和实时因子
- 碰撞检测和边界约束
- 仿真重置功能
- 错误处理和异常捕获

## 安装说明

### 系统要求
- Python 3.6+
- PyQt5
- NumPy
- PyOpenGL (推荐用于3D可视化)

### 依赖安装

使用pip安装所需依赖：

```bash
pip install numpy pyqt5 pyopengl
```

### 获取代码

从GitHub克隆代码库：

```bash
git clone https://github.com/zgxazb/AUV_zgxaxb.git
cd AUV_zgxaxb
```

## 使用方法

### 启动仿真

在项目目录下运行：

```bash
python auv_simulation.py
```

### 控制键位

#### 基本运动控制
- **前进/后退**：W / S
- **左转/右转**：A / D
- **上浮/下潜**：Q / E
- **上仰/下俯**：↑ / ↓
- **左滚/右滚**：← / →

#### 舵板控制
- **舵板向上**：数字键 1-4
- **舵板向下**：Shift + 数字键 1-4

#### 视角控制
- **旋转视角**：左键拖动
- **平移视角**：右键拖动
- **缩放视角**：鼠标滚轮

## 项目结构

```
auv_control_system/
├── auv_model.py        # AUV物理模型
├── auv_controller.py   # AUV控制器
├── auv_simulation.py   # 仿真主程序
├── auv_visualizer.py   # 可视化界面
├── .gitignore          # Git忽略文件
└── README.md           # 项目说明文档
```

## 技术细节

### AUV模型参数
- 长度: 2.0 m
- 宽度: 0.5 m
- 高度: 0.5 m
- 质量: 200.0 kg
- 最大推力: 50.0 N
- 最大舵角: 30度 (π/6 rad)

### 状态表示
AUV状态向量包含12个元素：
- 位置坐标 (x, y, z)
- 欧拉角 (横滚, 俯仰, 偏航)
- 线速度 (前向, 侧向, 垂向)
- 角速度 (横滚, 俯仰, 偏航)

### 控制输入
- 推进器推力
- 四个舵机的角度

### PID控制器
系统实现了四个独立的PID控制器，分别用于：
- 深度控制
- 航向控制
- 俯仰控制
- 横滚控制

## 扩展开发

### 修改物理参数
可以在`AUVModel`类的`__init__`方法中调整AUV的物理参数，如质量、尺寸、阻力系数等。

### 调整PID参数
可以在`AUVController`类的`__init__`方法中修改PID控制器的参数：

```python
self.pid_params = {
    'depth': {'kp': 10.0, 'ki': 0.1, 'kd': 2.0},
    'heading': {'kp': 5.0, 'ki': 0.05, 'kd': 1.0},
    'pitch': {'kp': 8.0, 'ki': 0.1, 'kd': 1.5},
    'roll': {'kp': 6.0, 'ki': 0.05, 'kd': 1.0}
}
```

### 添加新功能
- 可以扩展物理模型以包含更复杂的流体动力学效应
- 可以实现新的控制算法（如LQR、模糊控制等）
- 可以添加传感器模拟和环境干扰
- 可以开发路径规划和自主导航功能

## 故障排除

### 缺少依赖
如果运行时提示缺少依赖，请确保已安装所有必要的Python包：

```bash
pip install numpy pyqt5 pyopengl
```

### OpenGL问题
如果OpenGL不可用，系统将使用简化的显示方式。如需完整的3D可视化，请确保安装了正确版本的PyOpenGL。

### 仿真速度问题
可以通过调整`AUVSimulation`类中的`real_time_factor`参数来改变仿真速度：

```python
self.real_time_factor = 1.0  # 1.0表示实时仿真，大于1.0加速，小于1.0减速
```

## 许可证

[MIT License](LICENSE)

## 致谢

本项目基于PyQt5和OpenGL开发，感谢这些开源库的贡献者。

## 联系方式

如有任何问题或建议，请联系项目维护者。