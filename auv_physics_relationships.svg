<?xml version="1.0" encoding="UTF-8"?>
<svg width="1000" height="700" xmlns="http://www.w3.org/2000/svg">
    <!-- 背景和标题 -->
    <rect width="100%" height="100%" fill="#f9f9f9"/>
    <text x="500" y="40" font-family="Arial" font-size="24" font-weight="bold" text-anchor="middle" fill="#333">AUV物理量关系图</text>
    <text x="500" y="65" font-family="Arial" font-size="16" text-anchor="middle" fill="#666">推力、速度、舵角、姿态、流体力学、外形、重量、俯仰、偏航之间的关系</text>
    
    <!-- 定义模块样式 -->
    <defs>
        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
        </marker>
        <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
            <feDropShadow dx="2" dy="2" stdDeviation="2" flood-opacity="0.3"/>
        </filter>
    </defs>
    
    <!-- 模块定义 -->
    <!-- 1. 控制输入模块 -->
    <rect x="50" y="100" width="180" height="120" rx="8" fill="#e1f5fe" stroke="#0288d1" stroke-width="2" filter="url(#shadow)"/>
    <text x="140" y="130" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="#0277bd">控制输入</text>
    <text x="140" y="160" font-family="Arial" font-size="14" text-anchor="middle" fill="#01579b">推进器推力(T)</text>
    <text x="140" y="185" font-family="Arial" font-size="14" text-anchor="middle" fill="#01579b">舵角(α₁, α₂, α₃, α₄)</text>
    
    <!-- 2. 推进器与舵机模块 -->
    <rect x="300" y="100" width="180" height="120" rx="8" fill="#e8f5e9" stroke="#388e3c" stroke-width="2" filter="url(#shadow)"/>
    <text x="390" y="130" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="#2e7d32">推进器与舵机</text>
    <text x="390" y="160" font-family="Arial" font-size="14" text-anchor="middle" fill="#1b5e20">最大推力: 50N</text>
    <text x="390" y="185" font-family="Arial" font-size="14" text-anchor="middle" fill="#1b5e20">最大舵角: ±30°</text>
    
    <!-- 3. 流体力学模块 -->
    <rect x="550" y="100" width="180" height="120" rx="8" fill="#fff3e0" stroke="#f57c00" stroke-width="2" filter="url(#shadow)"/>
    <text x="640" y="130" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="#ef6c00">流体力学</text>
    <text x="640" y="160" font-family="Arial" font-size="14" text-anchor="middle" fill="#e65100">线性阻力: F_d = -k·v</text>
    <text x="640" y="185" font-family="Arial" font-size="14" text-anchor="middle" fill="#e65100">角阻力: T_d = -k·ω</text>
    
    <!-- 4. AUV物理特性模块 -->
    <rect x="50" y="280" width="180" height="120" rx="8" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="2" filter="url(#shadow)"/>
    <text x="140" y="310" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="#4a148c">AUV物理特性</text>
    <text x="140" y="340" font-family="Arial" font-size="14" text-anchor="middle" fill="#4a148c">质量: 200kg</text>
    <text x="140" y="365" font-family="Arial" font-size="14" text-anchor="middle" fill="#4a148c">尺寸: 2m×0.5m×0.5m</text>
    
    <!-- 5. 动力学模型模块 -->
    <rect x="300" y="280" width="180" height="120" rx="8" fill="#ffebee" stroke="#c62828" stroke-width="2" filter="url(#shadow)"/>
    <text x="390" y="310" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="#b71c1c">动力学模型</text>
    <text x="390" y="340" font-family="Arial" font-size="14" text-anchor="middle" fill="#b71c1c">F = m·a</text>
    <text x="390" y="365" font-family="Arial" font-size="14" text-anchor="middle" fill="#b71c1c">T = I·α</text>
    
    <!-- 6. 运动状态模块 -->
    <rect x="550" y="280" width="180" height="120" rx="8" fill="#e3f2fd" stroke="#1565c0" stroke-width="2" filter="url(#shadow)"/>
    <text x="640" y="310" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="#0d47a1">运动状态</text>
    <text x="640" y="340" font-family="Arial" font-size="14" text-anchor="middle" fill="#0d47a1">线速度: u, v, w</text>
    <text x="640" y="365" font-family="Arial" font-size="14" text-anchor="middle" fill="#0d47a1">角速度: p, q, r</text>
    
    <!-- 7. 姿态模块 -->
    <rect x="50" y="460" width="180" height="120" rx="8" fill="#fffde7" stroke="#fbc02d" stroke-width="2" filter="url(#shadow)"/>
    <text x="140" y="490" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="#f57f17">姿态</text>
    <text x="140" y="520" font-family="Arial" font-size="14" text-anchor="middle" fill="#f57f17">横滚(φ)</text>
    <text x="140" y="545" font-family="Arial" font-size="14" text-anchor="middle" fill="#f57f17">俯仰(θ)</text>
    <text x="140" y="570" font-family="Arial" font-size="14" text-anchor="middle" fill="#f57f17">偏航(ψ)</text>
    
    <!-- 8. 位置模块 -->
    <rect x="300" y="460" width="180" height="120" rx="8" fill="#e0f2f1" stroke="#00897b" stroke-width="2" filter="url(#shadow)"/>
    <text x="390" y="490" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="#00695c">位置</text>
    <text x="390" y="520" font-family="Arial" font-size="14" text-anchor="middle" fill="#00695c">X坐标</text>
    <text x="390" y="545" font-family="Arial" font-size="14" text-anchor="middle" fill="#00695c">Y坐标</text>
    <text x="390" y="570" font-family="Arial" font-size="14" text-anchor="middle" fill="#00695c">Z坐标(深度)</text>
    
    <!-- 9. PID控制模块 -->
    <rect x="550" y="460" width="180" height="120" rx="8" fill="#fce4ec" stroke="#c2185b" stroke-width="2" filter="url(#shadow)"/>
    <text x="640" y="490" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="#880e4f">PID控制</text>
    <text x="640" y="520" font-family="Arial" font-size="14" text-anchor="middle" fill="#880e4f">深度控制</text>
    <text x="640" y="545" font-family="Arial" font-size="14" text-anchor="middle" fill="#880e4f">航向控制</text>
    <text x="640" y="570" font-family="Arial" font-size="14" text-anchor="middle" fill="#880e4f">俯仰/横滚控制</text>
    
    <!-- 关系连接线 -->
    <!-- 控制输入 → 推进器与舵机 -->
    <line x1="230" y1="160" x2="300" y2="160" stroke="#0288d1" stroke-width="2" marker-end="url(#arrowhead)"/>
    
    <!-- 推进器与舵机 → 动力学模型 -->
    <line x1="390" y1="220" x2="390" y2="280" stroke="#388e3c" stroke-width="2" marker-end="url(#arrowhead)"/>
    
    <!-- 流体力学 → 动力学模型 -->
    <line x1="550" y1="160" x2="480" y2="280" stroke="#f57c00" stroke-width="2" marker-end="url(#arrowhead)"/>
    
    <!-- AUV物理特性 → 动力学模型 -->
    <line x1="230" y1="340" x2="300" y2="340" stroke="#7b1fa2" stroke-width="2" marker-end="url(#arrowhead)"/>
    
    <!-- 动力学模型 → 运动状态 -->
    <line x1="480" y1="340" x2="550" y2="340" stroke="#c62828" stroke-width="2" marker-end="url(#arrowhead)"/>
    
    <!-- 运动状态 → 姿态 -->
    <line x1="550" y1="400" x2="230" y2="505" stroke="#1565c0" stroke-width="2" marker-end="url(#arrowhead)"/>
    
    <!-- 运动状态 → 位置 -->
    <line x1="640" y1="400" x2="390" y2="460" stroke="#1565c0" stroke-width="2" marker-end="url(#arrowhead)"/>
    
    <!-- 姿态 → PID控制 -->
    <line x1="230" y1="520" x2="550" y2="520" stroke="#fbc02d" stroke-width="2" marker-end="url(#arrowhead)"/>
    
    <!-- 位置 → PID控制 -->
    <line x1="390" y1="590" x2="640" y2="545" stroke="#00897b" stroke-width="2" marker-end="url(#arrowhead)"/>
    
    <!-- PID控制 → 控制输入 -->
    <line x1="640" y1="460" x2="140" y2="220" stroke="#c2185b" stroke-width="2" marker-end="url(#arrowhead)"/>
    
    <!-- 关键数学关系标注 -->
    <rect x="770" y="100" width="180" height="200" rx="8" fill="#e8f5e9" stroke="#388e3c" stroke-width="2" filter="url(#shadow)"/>
    <text x="860" y="130" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="#2e7d32">关键数学关系</text>
    <text x="860" y="160" font-family="Arial" font-size="13" text-anchor="middle" fill="#1b5e20">F = T - k·v + F_rudder</text>
    <text x="860" y="185" font-family="Arial" font-size="13" text-anchor="middle" fill="#1b5e20">a = F / m</text>
    <text x="860" y="210" font-family="Arial" font-size="13" text-anchor="middle" fill="#1b5e20">v(t+1) = v(t) + a·dt</text>
    <text x="860" y="235" font-family="Arial" font-size="13" text-anchor="middle" fill="#1b5e20">T_total = Σ(r_i × F_i)</text>
    <text x="860" y="260" font-family="Arial" font-size="13" text-anchor="middle" fill="#1b5e20">ω(t+1) = ω(t) + α·dt</text>
    <text x="860" y="285" font-family="Arial" font-size="13" text-anchor="middle" fill="#1b5e20">姿态 = ∫ω dt</text>
    <text x="860" y="310" font-family="Arial" font-size="13" text-anchor="middle" fill="#1b5e20">位置 = ∫v dt</text>
    
    <!-- 物理量相互影响说明 -->
    <rect x="770" y="340" width="180" height="240" rx="8" fill="#fff3e0" stroke="#f57c00" stroke-width="2" filter="url(#shadow)"/>
    <text x="860" y="370" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle" fill="#ef6c00">影响关系</text>
    <text x="860" y="400" font-family="Arial" font-size="13" text-anchor="middle" fill="#e65100">推力 → 线速度</text>
    <text x="860" y="425" font-family="Arial" font-size="13" text-anchor="middle" fill="#e65100">舵角 → 角速度</text>
    <text x="860" y="450" font-family="Arial" font-size="13" text-anchor="middle" fill="#e65100">重量 → 平衡状态</text>
    <text x="860" y="475" font-family="Arial" font-size="13" text-anchor="middle" fill="#e65100">外形 → 流体阻力</text>
    <text x="860" y="500" font-family="Arial" font-size="13" text-anchor="middle" fill="#e65100">线速度 → 流体阻力</text>
    <text x="860" y="525" font-family="Arial" font-size="13" text-anchor="middle" fill="#e65100">角速度 → 角阻力</text>
    <text x="860" y="550" font-family="Arial" font-size="13" text-anchor="middle" fill="#e65100">姿态 → 位置更新</text>
    <text x="860" y="575" font-family="Arial" font-size="13" text-anchor="middle" fill="#e65100">PID → 控制修正</text>
</svg>